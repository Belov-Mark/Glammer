{% extends "global.html" %}
{% load static %}

{% block title %}
    <title>GLAMMER | muslim</title>
{% endblock %}

{% block css %}
    {{ block.super }}

{% endblock %}

{% block main %}

    <section class="slider-container">
        <article class="slider" id="slider1">
            <div class="slides">
                {% for slide in slider1_slides %}
                    <div class="slide">
                        <img src="{{ slide.image.url }}" alt="{{ slide.title }}">
                    </div>
                {% endfor %}
            </div>
            <a class="prev" onclick="prevSlide(1)">&#10094;</a>
            <a class="next" onclick="nextSlide(1)">&#10095;</a>
            <div class="dots">
                {% for slide in slider1_slides %}
                    <span class="dot" onclick="currentSlide(1, {{ forloop.counter0 }})"></span>
                {% endfor %}
            </div>
        </article>
        <article class="slider" id="slider2">
            <div class="slides">
                {% for slide in slider2_slides %}
                    <div class="slide">
                        <img src="{{ slide.image.url }}" alt="{{ slide.title }}">
                    </div>
                {% endfor %}
            </div>
            <a class="prev" onclick="prevSlide(2)">&#10094;</a>
            <a class="next" onclick="nextSlide(2)">&#10095;</a>
            <div class="dots">
                {% for slide in slider2_slides %}
                    <span class="dot" onclick="currentSlide(2, {{ forloop.counter0 }})"></span>
                {% endfor %}
            </div>
        </article>
    </section>

    <section>
        <p class="titleSection">НОВИНКИ</p>
        <a href="{% url 'products:news' %}" class="paragrafSection">Все новинки</a>
    </section>
    <section class="catalog">
        {% for newProduct in newProducts %}
        <article class="item">
            {% if newProduct.image %}
                {% if newProduct.discount %}
                    <div class="container">
                        <img src="{{ newProduct.image.url }}" alt="{{ newProduct.name }}" class="image">
                        <div class="discount">СКИДКА {{ newProduct.discount }}%</div>
                    </div>
                {% else %}
                    <img src="{{ newProduct.image.url }}" alt="{{ newProduct.name }}">
                {% endif %}
            {% else %}
                {% if newProduct.discount %}
                    <div class="container">
                        <img src="{% static "images/foto.webp" %}" alt="Изображения нет!">
                        <div class="discount">СКИДКА {{ newProduct.discount }}%</div>
                    </div>
                {% else %}
                    <img src="{% static "images/foto.webp" %}" alt="Изображения нет!">
                {% endif %}
            {% endif %}
            <div class="description">
                <a href="{% url "products:product" newProduct.id %}">{{ newProduct.name }}</a>
                <p class="productId">{{ newProduct.id }}</p>
                <div class="colors">
                    <a>Беж</a>
                    <a>Чёрный</a>
                </div>
                {% if newProduct.discount %}
                    <div class="priceForSell">
                        <p class="oldPrice">{{ newProduct.price }} руб.</p>
                        <p>{{ newProduct.sellPrice }} руб.</p>
                    </div>
                {% else %}
                    <p>{{ newProduct.price }} руб.</p>
                {% endif %}
                
                <a class="cartButton">Добавить в корзину</a>
            </div>
        </article>
        {% empty %}
            <div class="error"><h1>Нет элементов для отображения!</h1></div>
        {% endfor %}
    </section>
    <section class="all">
        <a href="{% url 'products:news' %}" class="buttonAll">
            Посмотреть все новинки
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.10073 9.80399">
                <path d="M0,0,7.05023,2.45114,14.10073,4.902,7.05023,7.35291,0,9.804C2.35793,6.59817,2.40356,3.33138,0,0Z"/>
            </svg>
        </a>
    </section>

    <section>
        <p class="titleSection titleDiscount">СКИДКА!</p>
        <a href="{% url 'products:sale' %}" class="paragrafSection">Все товары со скидкой</a>
    </section>
    <section class="catalog">
        {% for saleProduct in saleProducts %}
            <article class="item">
                {% if saleProduct.image %}
                    {% if saleProduct.discount %}
                        <div class="container">
                            <img src="{{ saleProduct.image.url }}" alt="{{ saleProduct.name }}" class="image">
                            <div class="discount">СКИДКА {{ saleProduct.discount }}%</div>
                            <form action="{% url "favorites:favorite" %}" method="post">
                                {% csrf_token %}
                                <input type="hidden" name="action" value="add">
                                <input type="hidden" name="product_id" value="{{ product.id }}">
                                <button type="submit" class="heart">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 57.87865 50.46559">
                                        <path d="M28.85469,50.46559c-3.46887-2.89024-7.00785-5.71809-10.40736-8.7047-3.52594-3.09767-6.99949-6.26516-10.34194-9.55842A27.3609,27.3609,0,0,1,1.15361,22.05765c-2.611-7.2951-.81947-15.07625,5.6777-19.45574A15.722,15.722,0,0,1,25.48314,3.66267c1.17785,1.00562,2.26536,2.117,3.41716,3.20114,1.14234-1.07125,2.25326-2.24175,3.49289-3.25471A15.44965,15.44965,0,0,1,56.69765,9.74083c2.10264,5.29362,1.26324,10.46933-1.45457,15.34684a42.25066,42.25066,0,0,1-9.33171,10.86244c-5.42656,4.79218-10.99691,9.42156-16.50787,14.11811C29.253,50.19647,29.08274,50.30152,28.85469,50.46559ZM28.82807,12.002c-.27016-.31016-.57473-.69876-.91893-1.04835A51.97293,51.97293,0,0,0,22.93223,6.0022a12.0657,12.0657,0,0,0-17.88745,3.367A12.69051,12.69051,0,0,0,3.866,19.14987a20.6952,20.6952,0,0,0,5.936,9.90632c3.55141,3.54736,7.28819,6.91453,11.03261,10.26144,2.60525,2.32867,5.35776,4.49259,8.05535,6.73916,1.04173-.8514,2.01693-1.63969,2.98276-2.43927A174.41,174.41,0,0,0,47.33745,29.82711c3.19275-3.35544,6.01258-6.94483,6.81488-11.71828A12.12553,12.12553,0,0,0,33.957,6.71052C32.15374,8.3512,30.55091,10.21215,28.82807,12.002Z"/>
                                    </svg>
                                </button>
                            </form>
                            
                        </div>
                    {% else %}
                        <img src="{{ saleProduct.image.url }}" alt="{{ saleProduct.name }}">
                        <form action="{% url "favorites:favorite" %}" method="post">
                            {% csrf_token %}
                            <input type="hidden" name="action" value="add">
                            <input type="hidden" name="product_id" value="{{ product.id }}">
                            <button type="submit" class="heart">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 57.87865 50.46559">
                                    <path d="M28.85469,50.46559c-3.46887-2.89024-7.00785-5.71809-10.40736-8.7047-3.52594-3.09767-6.99949-6.26516-10.34194-9.55842A27.3609,27.3609,0,0,1,1.15361,22.05765c-2.611-7.2951-.81947-15.07625,5.6777-19.45574A15.722,15.722,0,0,1,25.48314,3.66267c1.17785,1.00562,2.26536,2.117,3.41716,3.20114,1.14234-1.07125,2.25326-2.24175,3.49289-3.25471A15.44965,15.44965,0,0,1,56.69765,9.74083c2.10264,5.29362,1.26324,10.46933-1.45457,15.34684a42.25066,42.25066,0,0,1-9.33171,10.86244c-5.42656,4.79218-10.99691,9.42156-16.50787,14.11811C29.253,50.19647,29.08274,50.30152,28.85469,50.46559ZM28.82807,12.002c-.27016-.31016-.57473-.69876-.91893-1.04835A51.97293,51.97293,0,0,0,22.93223,6.0022a12.0657,12.0657,0,0,0-17.88745,3.367A12.69051,12.69051,0,0,0,3.866,19.14987a20.6952,20.6952,0,0,0,5.936,9.90632c3.55141,3.54736,7.28819,6.91453,11.03261,10.26144,2.60525,2.32867,5.35776,4.49259,8.05535,6.73916,1.04173-.8514,2.01693-1.63969,2.98276-2.43927A174.41,174.41,0,0,0,47.33745,29.82711c3.19275-3.35544,6.01258-6.94483,6.81488-11.71828A12.12553,12.12553,0,0,0,33.957,6.71052C32.15374,8.3512,30.55091,10.21215,28.82807,12.002Z"/>
                                </svg>
                            </button>
                        </form>
                        
                    {% endif %}
                {% else %}
                    {% if saleProduct.discount %}
                        <div class="container">
                            <img src="{% static "images/foto.webp" %}" alt="Изображения нет!">
                            <div class="discount">СКИДКА {{ saleProduct.discount }}%</div>
                            <form action="{% url "favorites:favorite" %}" method="post">
                                {% csrf_token %}
                                <input type="hidden" name="action" value="add">
                                <input type="hidden" name="product_id" value="{{ product.id }}">
                                <button type="submit" class="heart">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 57.87865 50.46559">
                                        <path d="M28.85469,50.46559c-3.46887-2.89024-7.00785-5.71809-10.40736-8.7047-3.52594-3.09767-6.99949-6.26516-10.34194-9.55842A27.3609,27.3609,0,0,1,1.15361,22.05765c-2.611-7.2951-.81947-15.07625,5.6777-19.45574A15.722,15.722,0,0,1,25.48314,3.66267c1.17785,1.00562,2.26536,2.117,3.41716,3.20114,1.14234-1.07125,2.25326-2.24175,3.49289-3.25471A15.44965,15.44965,0,0,1,56.69765,9.74083c2.10264,5.29362,1.26324,10.46933-1.45457,15.34684a42.25066,42.25066,0,0,1-9.33171,10.86244c-5.42656,4.79218-10.99691,9.42156-16.50787,14.11811C29.253,50.19647,29.08274,50.30152,28.85469,50.46559ZM28.82807,12.002c-.27016-.31016-.57473-.69876-.91893-1.04835A51.97293,51.97293,0,0,0,22.93223,6.0022a12.0657,12.0657,0,0,0-17.88745,3.367A12.69051,12.69051,0,0,0,3.866,19.14987a20.6952,20.6952,0,0,0,5.936,9.90632c3.55141,3.54736,7.28819,6.91453,11.03261,10.26144,2.60525,2.32867,5.35776,4.49259,8.05535,6.73916,1.04173-.8514,2.01693-1.63969,2.98276-2.43927A174.41,174.41,0,0,0,47.33745,29.82711c3.19275-3.35544,6.01258-6.94483,6.81488-11.71828A12.12553,12.12553,0,0,0,33.957,6.71052C32.15374,8.3512,30.55091,10.21215,28.82807,12.002Z"/>
                                    </svg>
                                </button>
                            </form>
                            
                        </div>
                    {% else %}
                        <img src="{% static "images/foto.webp" %}" alt="Изображения нет!">
                        <form action="{% url "favorites:favorite" %}" method="post">
                            {% csrf_token %}
                            <input type="hidden" name="action" value="add">
                            <input type="hidden" name="product_id" value="{{ product.id }}">
                            <button type="submit" class="heart">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 57.87865 50.46559">
                                    <path d="M28.85469,50.46559c-3.46887-2.89024-7.00785-5.71809-10.40736-8.7047-3.52594-3.09767-6.99949-6.26516-10.34194-9.55842A27.3609,27.3609,0,0,1,1.15361,22.05765c-2.611-7.2951-.81947-15.07625,5.6777-19.45574A15.722,15.722,0,0,1,25.48314,3.66267c1.17785,1.00562,2.26536,2.117,3.41716,3.20114,1.14234-1.07125,2.25326-2.24175,3.49289-3.25471A15.44965,15.44965,0,0,1,56.69765,9.74083c2.10264,5.29362,1.26324,10.46933-1.45457,15.34684a42.25066,42.25066,0,0,1-9.33171,10.86244c-5.42656,4.79218-10.99691,9.42156-16.50787,14.11811C29.253,50.19647,29.08274,50.30152,28.85469,50.46559ZM28.82807,12.002c-.27016-.31016-.57473-.69876-.91893-1.04835A51.97293,51.97293,0,0,0,22.93223,6.0022a12.0657,12.0657,0,0,0-17.88745,3.367A12.69051,12.69051,0,0,0,3.866,19.14987a20.6952,20.6952,0,0,0,5.936,9.90632c3.55141,3.54736,7.28819,6.91453,11.03261,10.26144,2.60525,2.32867,5.35776,4.49259,8.05535,6.73916,1.04173-.8514,2.01693-1.63969,2.98276-2.43927A174.41,174.41,0,0,0,47.33745,29.82711c3.19275-3.35544,6.01258-6.94483,6.81488-11.71828A12.12553,12.12553,0,0,0,33.957,6.71052C32.15374,8.3512,30.55091,10.21215,28.82807,12.002Z"/>
                                </svg>
                            </button>
                        </form>
                        
                    {% endif %}
                    
                {% endif %}
                <div class="description">
                    <a href="{% url "products:product" saleProduct.id %}">{{ saleProduct.name }}</a>
                    <p class="productId">{{ saleProduct.id }}</p>
                    <div class="colors">
                        <a>Беж</a>
                        <a>Чёрный</a>
                    </div>
                    {% if saleProduct.discount %}
                        <div class="priceForSell">
                            <p class="oldPrice">{{ saleProduct.price }} руб.</p>
                            <p>{{ saleProduct.sellPrice }} руб.</p>
                        </div>
                    {% else %}
                        <p>{{ saleProduct.price }} руб.</p>
                    {% endif %}
                    
                    <form method="post" action="{% url 'carts:cart' %}" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="action" value="add">
                        <input type="hidden" name="product_id" value="{{ product.id }}">
                        <button type="submit" class="cartButton">Добавить в корзину</button>
                    </form>
                </div>
            </article>
        {% empty %}
            <div class="error"><h1>Нет элементов для отображения!</h1></div>
        {% endfor %}
        
    </section>
    <div class="all">
        <a href="{% url 'products:sale' %}" class="buttonAll">
            Посмотреть все товары со скидкой
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.10073 9.80399">
                <path d="M0,0,7.05023,2.45114,14.10073,4.902,7.05023,7.35291,0,9.804C2.35793,6.59817,2.40356,3.33138,0,0Z"/>
            </svg>
        </a>
    </div>
    <div>

    </div>

{% endblock %}

{% block script %}
    <script src="{% static 'main/scripts/main.js' %}" async></script>
{% endblock %}