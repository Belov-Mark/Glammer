{% extends "global.html" %}
{% load static %}

{% block title %}
    <title>GLAMMER | muslim</title>
{% endblock %}

{% block css %}
    {{ block.super }}

{% endblock %}

{% block main %}

    <section class="slider-container">
        <article class="slider" id="slider1">
            <div class="slides">
                {% for slide in slider1_slides %}
                    <div class="slide">
                        <img src="{{ slide.image.url }}" alt="{{ slide.title }}">
                    </div>
                {% endfor %}
            </div>
            <a class="prev" onclick="prevSlide(1)">&#10094;</a>
            <a class="next" onclick="nextSlide(1)">&#10095;</a>
            <div class="dots">
                {% for slide in slider1_slides %}
                    <span class="dot" onclick="currentSlide(1, {{ forloop.counter0 }})"></span>
                {% endfor %}
            </div>
        </article>
        <article class="slider" id="slider2">
            <div class="slides">
                {% for slide in slider2_slides %}
                    <div class="slide">
                        <img src="{{ slide.image.url }}" alt="{{ slide.title }}">
                    </div>
                {% endfor %}
            </div>
            <a class="prev" onclick="prevSlide(2)">&#10094;</a>
            <a class="next" onclick="nextSlide(2)">&#10095;</a>
            <div class="dots">
                {% for slide in slider2_slides %}
                    <span class="dot" onclick="currentSlide(2, {{ forloop.counter0 }})"></span>
                {% endfor %}
            </div>
        </article>
    </section>

    <section>
        <p class="titleSection">НОВИНКИ</p>
        <a href="{% url 'products:news' %}" class="paragrafSection">Все новинки</a>
    </section>
    <section class="catalog">
        {% for newProduct in newProducts %}
        <article class="item">
            {% if newProduct.image %}
                {% if newProduct.discount %}
                    <div class="container">
                        <img src="{{ newProduct.image.url }}" alt="{{ newProduct.name }}" class="image">
                        <div class="discount">СКИДКА {{ newProduct.discount }}%</div>
                    </div>
                {% else %}
                    <img src="{{ newProduct.image.url }}" alt="{{ newProduct.name }}">
                {% endif %}
            {% else %}
                {% if newProduct.discount %}
                    <div class="container">
                        <img src="{% static "images/foto.webp" %}" alt="Изображения нет!">
                        <div class="discount">СКИДКА {{ newProduct.discount }}%</div>
                    </div>
                {% else %}
                    <img src="{% static "images/foto.webp" %}" alt="Изображения нет!">
                {% endif %}
            {% endif %}
            <div class="description">
                <a href="{% url "products:product" newProduct.id %}">{{ newProduct.name }}</a>
                <p class="productId">{{ newProduct.id }}</p>
                <div class="colors">
                    <a>Беж</a>
                    <a>Чёрный</a>
                </div>
                {% if newProduct.discount %}
                    <div class="priceForSell">
                        <p class="oldPrice">{{ newProduct.price }} руб.</p>
                        <p>{{ newProduct.sellPrice }} руб.</p>
                    </div>
                {% else %}
                    <p>{{ newProduct.price }} руб.</p>
                {% endif %}
                
                <a class="cartButton">Добавить в корзину</a>
            </div>
        </article>
        {% empty %}
            <div class="error"><h1>Нет элементов для отображения!</h1></div>
        {% endfor %}
    </section>
    <section class="all">
        <a href="{% url 'products:news' %}" class="buttonAll">
            Посмотреть все новинки
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.10073 9.80399">
                <path d="M0,0,7.05023,2.45114,14.10073,4.902,7.05023,7.35291,0,9.804C2.35793,6.59817,2.40356,3.33138,0,0Z"/>
            </svg>
        </a>
    </section>

    <section>
        <p class="titleSection titleDiscount">СКИДКА!</p>
        <a href="{% url 'products:sale' %}" class="paragrafSection">Все товары со скидкой</a>
    </section>
    <section class="catalog">
        {% for saleProduct in saleProducts %}
            <article class="item">
                {% if saleProduct.image %}
                    {% if saleProduct.discount %}
                        <div class="container">
                            <img src="{{ saleProduct.image.url }}" alt="{{ saleProduct.name }}" class="image">
                            <div class="discount">СКИДКА {{ saleProduct.discount }}%</div>
                        </div>
                    {% else %}
                        <img src="{{ saleProduct.image.url }}" alt="{{ saleProduct.name }}">
                    {% endif %}
                {% else %}
                    {% if saleProduct.discount %}
                        <div class="container">
                            <img src="{% static "images/foto.webp" %}" alt="Изображения нет!">
                            <div class="discount">СКИДКА {{ saleProduct.discount }}%</div>
                        </div>
                    {% else %}
                        <img src="{% static "images/foto.webp" %}" alt="Изображения нет!">
                    {% endif %}
                    
                {% endif %}
                <div class="description">
                    <a href="{% url "products:product" saleProduct.id %}">{{ saleProduct.name }}</a>
                    <p class="productId">{{ saleProduct.id }}</p>
                    <div class="colors">
                        <a>Беж</a>
                        <a>Чёрный</a>
                    </div>
                    {% if saleProduct.discount %}
                        <div class="priceForSell">
                            <p class="oldPrice">{{ saleProduct.price }} руб.</p>
                            <p>{{ saleProduct.sellPrice }} руб.</p>
                        </div>
                    {% else %}
                        <p>{{ saleProduct.price }} руб.</p>
                    {% endif %}
                    
                    <form method="post" action="{% url 'carts:cart' %}" style="display:inline;">
                        {% csrf_token %}
                        <input type="hidden" name="action" value="add">
                        <input type="hidden" name="product_id" value="{{ product.id }}">
                        <button type="submit" class="cartButton">Добавить в корзину</button>
                    </form>
                </div>
            </article>
        {% empty %}
            <div class="error"><h1>Нет элементов для отображения!</h1></div>
        {% endfor %}
        
    </section>
    <div class="all">
        <a href="{% url 'products:sale' %}" class="buttonAll">
            Посмотреть все товары со скидкой
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.10073 9.80399">
                <path d="M0,0,7.05023,2.45114,14.10073,4.902,7.05023,7.35291,0,9.804C2.35793,6.59817,2.40356,3.33138,0,0Z"/>
            </svg>
        </a>
    </div>
    <div>

    </div>

{% endblock %}

{% block script %}
    <script src="{% static 'main/scripts/main.js' %}" async></script>
{% endblock %}